[circus]
check_delay = 5

[watcher:libreoffice]
cmd = /usr/lib/libreoffice/program/soffice
args = --nologo --headless --nocrashreport --nodefault --nofirststartwizard --norestore --invisible --accept="socket,host=localhost,port=2002,tcpNoDelay=1;urp;StarOffice.ComponentContext"
autostart = true
respawn = true
stderr_stream.class = StdoutStream
stdin_stream.class = StdoutStream


[watcher:preview-server]
working_dir = /app
cmd = /usr/bin/python3
args = -m preview
autostart = true
respawn = true
stderr_stream.class = StdoutStream
stdin_stream.class = StdoutStream


[watcher:prometheus-node-exporter]
cmd = /usr/bin/prometheus-node-exporter
autostart = true
respawn = true
stderr_stream.class = StdoutStream
stdin_stream.class = StdoutStream


[plugin:httpd-observer]
use = circus.plugins.http_observer.HttpObserver
loop_rate = 60
check_url = http://localhost:3000/
timeout = 10
restart_on_error = libreoffice


[plugin:flapping]
use = circus.plugins.flapping.Flapping
retry_in = 3
max_retry = 2
